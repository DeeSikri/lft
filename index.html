<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liver Function Test Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 20px;
        }
        
        .copyright {
            font-size: 12px;
            color: #666;
            margin-bottom: 10px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 14px;
        }
        
        .content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 20px;
        }
        
        .test-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        
        .test-item {
            margin-bottom: 25px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .test-name {
            font-weight: bold;
            color: #333;
        }
        
        .test-value {
            font-size: 18px;
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 5px;
            min-width: 100px;
            text-align: center;
        }
        
        .normal {
            background: #d4edda;
            color: #155724;
        }
        
        .abnormal {
            background: #f8d7da;
            color: #721c24;
        }
        
        .slider-container {
            margin-top: 10px;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }
        
        .reference-range {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .interpretation-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            position: sticky;
            top: 20px;
        }
        
        .interpretation-panel h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
        }
        
        .diagnosis-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }
        
        .diagnosis-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .diagnosis-list {
            list-style: none;
            padding-left: 0;
        }
        
        .diagnosis-list li {
            padding: 8px 0;
            color: #555;
            border-bottom: 1px solid #eee;
        }
        
        .diagnosis-list li:last-child {
            border-bottom: none;
        }
        
        .reset-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-top: 15px;
            transition: background 0.3s;
        }
        
        .reset-btn:hover {
            background: #5568d3;
        }
        
        .disclaimer {
            text-align: center;
            padding: 20px;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .disclaimer-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 10px;
        }
        
        .disclaimer-text {
            color: #856404;
            font-size: 14px;
            line-style: italic;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .interpretation-panel {
                position: relative;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="copyright">¬© 2025 Deeksha Sikri</div>
            <h1>üî¨ Liver Function Test Simulator</h1>
            <p class="subtitle">Interactive Learning Tool for Year 1 Medical Students</p>
        </div>
        
        <div class="content">
            <div class="test-panel">
                <h2 style="margin-bottom: 20px; color: #333;">Laboratory Parameters</h2>
                
                <!-- ALT -->
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">ALT (Alanine Aminotransferase)</span>
                        <span class="test-value" id="alt-value">30 U/L</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="alt-slider" min="0" max="500" value="30" step="5">
                        <div class="reference-range">Reference: Males 7-55 U/L, Females 7-45 U/L</div>
                    </div>
                </div>
                
                <!-- AST -->
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">AST (Aspartate Aminotransferase)</span>
                        <span class="test-value" id="ast-value">25 U/L</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="ast-slider" min="0" max="500" value="25" step="5">
                        <div class="reference-range">Reference: Males 8-48 U/L, Females 8-43 U/L</div>
                    </div>
                </div>
                
                <!-- Alkaline Phosphatase -->
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Alkaline Phosphatase (ALP)</span>
                        <span class="test-value" id="alp-value">80 U/L</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="alp-slider" min="0" max="400" value="80" step="5">
                        <div class="reference-range">Reference: Males 40-129 U/L, Females 35-104 U/L</div>
                    </div>
                </div>
                
                <!-- Total Bilirubin -->
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Total Bilirubin</span>
                        <span class="test-value" id="bilirubin-value">0.8 mg/dL</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="bilirubin-slider" min="0" max="20" value="0.8" step="0.1">
                        <div class="reference-range">Reference: ‚â§ 1.2 mg/dL</div>
                    </div>
                </div>
                
                <!-- Direct Bilirubin -->
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Direct Bilirubin</span>
                        <span class="test-value" id="direct-bili-value">0.2 mg/dL</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="direct-bili-slider" min="0" max="10" value="0.2" step="0.1">
                        <div class="reference-range">Reference: 0.0-0.3 mg/dL</div>
                    </div>
                </div>
                
                <!-- Albumin -->
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Albumin</span>
                        <span class="test-value" id="albumin-value">4.0 g/dL</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="albumin-slider" min="1" max="6" value="4.0" step="0.1">
                        <div class="reference-range">Reference: 3.5-5.0 g/dL</div>
                    </div>
                </div>
                
                <!-- Total Protein -->
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Total Protein</span>
                        <span class="test-value" id="protein-value">7.0 g/dL</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="protein-slider" min="3" max="10" value="7.0" step="0.1">
                        <div class="reference-range">Reference: 6.0-8.5 g/dL</div>
                    </div>
                </div>
                
                <!-- GGT -->
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">GGT (Gamma-Glutamyl Transferase)</span>
                        <span class="test-value" id="ggt-value">30 U/L</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="ggt-slider" min="0" max="300" value="30" step="5">
                        <div class="reference-range">Reference: Males 8-61 U/L, Females 5-36 U/L</div>
                    </div>
                </div>
            </div>
            
            <div class="interpretation-panel">
                <h2>üîç Clinical Interpretation</h2>
                
                <div class="diagnosis-box">
                    <div class="diagnosis-title">Pattern Analysis</div>
                    <div id="pattern-analysis">All values within normal limits</div>
                </div>
                
                <div class="diagnosis-box">
                    <div class="diagnosis-title">Differential Diagnosis</div>
                    <ul class="diagnosis-list" id="differential-list">
                        <li>No abnormalities detected</li>
                    </ul>
                </div>
                
                <div class="diagnosis-box">
                    <div class="diagnosis-title">Key Ratios</div>
                    <div id="ratios">
                        <div style="margin-bottom: 8px;">AST/ALT Ratio: <strong id="ast-alt-ratio">0.83</strong></div>
                        <div>Direct/Total Bilirubin: <strong id="bili-ratio">25%</strong></div>
                    </div>
                </div>
                
                <button class="reset-btn" onclick="resetValues()">Reset to Normal</button>
            </div>
        </div>
        
        <div class="disclaimer">
            <div class="disclaimer-title">‚ö†Ô∏è DISCLAIMER</div>
            <div class="disclaimer-text">
                This liver function test simulator was created by AI for educational purposes only. 
                It is designed as a learning tool for Year 1 medical students and should not be used 
                for actual clinical diagnosis or patient care. Always consult qualified healthcare 
                professionals for medical advice and interpretation of laboratory results.
            </div>
        </div>
    </div>

    <script>
        // Reference ranges
        const ranges = {
            alt: { min: 7, max: 55, female_max: 45 },
            ast: { min: 8, max: 48, female_max: 43 },
            alp: { min: 40, max: 129, female_min: 35, female_max: 104 },
            bilirubin: { max: 1.2 },
            directBili: { max: 0.3 },
            albumin: { min: 3.5, max: 5.0 },
            protein: { min: 6.0, max: 8.5 },
            ggt: { min: 8, max: 61, female_min: 5, female_max: 36 }
        };
        
        // Initialize sliders
        const sliders = {
            alt: document.getElementById('alt-slider'),
            ast: document.getElementById('ast-slider'),
            alp: document.getElementById('alp-slider'),
            bilirubin: document.getElementById('bilirubin-slider'),
            directBili: document.getElementById('direct-bili-slider'),
            albumin: document.getElementById('albumin-slider'),
            protein: document.getElementById('protein-slider'),
            ggt: document.getElementById('ggt-slider')
        };
        
        // Add event listeners
        Object.keys(sliders).forEach(key => {
            sliders[key].addEventListener('input', updateValues);
        });
        
        function updateValues() {
            const values = {
                alt: parseFloat(sliders.alt.value),
                ast: parseFloat(sliders.ast.value),
                alp: parseFloat(sliders.alp.value),
                bilirubin: parseFloat(sliders.bilirubin.value),
                directBili: parseFloat(sliders.directBili.value),
                albumin: parseFloat(sliders.albumin.value),
                protein: parseFloat(sliders.protein.value),
                ggt: parseFloat(sliders.ggt.value)
            };
            
            // Update display values
            document.getElementById('alt-value').textContent = values.alt + ' U/L';
            document.getElementById('ast-value').textContent = values.ast + ' U/L';
            document.getElementById('alp-value').textContent = values.alp + ' U/L';
            document.getElementById('bilirubin-value').textContent = values.bilirubin.toFixed(1) + ' mg/dL';
            document.getElementById('direct-bili-value').textContent = values.directBili.toFixed(1) + ' mg/dL';
            document.getElementById('albumin-value').textContent = values.albumin.toFixed(1) + ' g/dL';
            document.getElementById('protein-value').textContent = values.protein.toFixed(1) + ' g/dL';
            document.getElementById('ggt-value').textContent = values.ggt + ' U/L';
            
            // Update colors
            updateColor('alt-value', values.alt, ranges.alt.min, ranges.alt.max);
            updateColor('ast-value', values.ast, ranges.ast.min, ranges.ast.max);
            updateColor('alp-value', values.alp, ranges.alp.min, ranges.alp.max);
            updateColor('bilirubin-value', values.bilirubin, 0, ranges.bilirubin.max);
            updateColor('direct-bili-value', values.directBili, 0, ranges.directBili.max);
            updateColor('albumin-value', values.albumin, ranges.albumin.min, ranges.albumin.max);
            updateColor('protein-value', values.protein, ranges.protein.min, ranges.protein.max);
            updateColor('ggt-value', values.ggt, ranges.ggt.min, ranges.ggt.max);
            
            // Calculate ratios
            const astAltRatio = values.alt > 0 ? (values.ast / values.alt).toFixed(2) : '0.00';
            const biliRatio = values.bilirubin > 0 ? ((values.directBili / values.bilirubin) * 100).toFixed(0) : '0';
            
            document.getElementById('ast-alt-ratio').textContent = astAltRatio;
            document.getElementById('bili-ratio').textContent = biliRatio + '%';
            
            // Update interpretation
            updateInterpretation(values, astAltRatio, biliRatio);
        }
        
        function updateColor(elementId, value, min, max) {
            const element = document.getElementById(elementId);
            if (value >= min && value <= max) {
                element.className = 'test-value normal';
            } else {
                element.className = 'test-value abnormal';
            }
        }
        
        function updateInterpretation(values, astAltRatio, biliRatio) {
            let pattern = '';
            let differentials = [];
            
            const altElevated = values.alt > ranges.alt.max;
            const astElevated = values.ast > ranges.ast.max;
            const alpElevated = values.alp > ranges.alp.max;
            const bilirubinElevated = values.bilirubin > ranges.bilirubin.max;
            const directBiliElevated = values.directBili > ranges.directBili.max;
            const albuminLow = values.albumin < ranges.albumin.min;
            const ggtElevated = values.ggt > ranges.ggt.max;
            
            // Pattern Analysis
            if (!altElevated && !astElevated && !alpElevated && !bilirubinElevated) {
                pattern = '‚úì All values within normal limits';
            } else {
                // Hepatocellular pattern
                if ((altElevated || astElevated) && !alpElevated) {
                    pattern = '<strong>Hepatocellular Pattern:</strong> Elevated transaminases with normal/mildly elevated ALP suggests liver cell injury.';
                    
                    // AST/ALT ratio analysis
                    if (parseFloat(astAltRatio) > 2) {
                        differentials.push('Alcoholic hepatitis (AST/ALT ratio > 2)');
                        differentials.push('Cirrhosis');
                    } else if (parseFloat(astAltRatio) >= 1) {
                        differentials.push('Viral hepatitis (ALT ‚â• AST)');
                        differentials.push('Autoimmune hepatitis');
                        differentials.push('Drug-induced liver injury');
                    } else {
                        differentials.push('Acute viral hepatitis (ALT >> AST)');
                        differentials.push('Non-alcoholic fatty liver disease (NAFLD)');
                    }
                }
                
                // Cholestatic pattern
                else if (alpElevated && (ggtElevated || bilirubinElevated)) {
                    pattern = '<strong>Cholestatic Pattern:</strong> Elevated ALP with GGT or bilirubin suggests biliary obstruction or cholestasis.';
                    
                    if (parseFloat(biliRatio) > 50) {
                        differentials.push('Post-hepatic jaundice (obstructive):');
                        differentials.push('‚Ä¢ Choledocholithiasis (gallstones)');
                        differentials.push('‚Ä¢ Pancreatic cancer');
                        differentials.push('‚Ä¢ Primary biliary cholangitis');
                        differentials.push('‚Ä¢ Primary sclerosing cholangitis');
                    } else {
                        differentials.push('Intrahepatic cholestasis');
                        differentials.push('Drug-induced cholestasis');
                    }
                }
                
                // Mixed pattern
                else if ((altElevated || astElevated) && alpElevated) {
                    pattern = '<strong>Mixed Pattern:</strong> Elevated transaminases and ALP suggests combined hepatocellular and cholestatic injury.';
                    differentials.push('Chronic liver disease');
                    differentials.push('Infiltrative liver disease');
                    differentials.push('Sepsis');
                }
                
                // Bilirubin predominant
                if (bilirubinElevated && !altElevated && !astElevated && !alpElevated) {
                    if (parseFloat(biliRatio) < 20) {
                        pattern = '<strong>Unconjugated Hyperbilirubinemia:</strong> Elevated total bilirubin with low direct bilirubin suggests pre-hepatic cause.';
                        differentials = [
                            'Pre-hepatic jaundice:',
                            '‚Ä¢ Hemolytic anemia',
                            '‚Ä¢ Gilbert syndrome',
                            '‚Ä¢ Crigler-Najjar syndrome'
                        ];
                    } else {
                        pattern = '<strong>Conjugated Hyperbilirubinemia:</strong> Elevated direct bilirubin suggests hepatic or post-hepatic cause.';
                        differentials.push('Dubin-Johnson syndrome');
                        differentials.push('Rotor syndrome');
                    }
                }
                
                // Synthetic dysfunction
                if (albuminLow) {
                    if (pattern) pattern += '<br><br>';
                    pattern += '<strong>Synthetic Dysfunction:</strong> Low albumin suggests chronic liver disease or decreased hepatic synthesis.';
                    if (!differentials.some(d => d.includes('Chronic liver disease'))) {
                        differentials.push('Chronic liver disease/Cirrhosis');
                        differentials.push('Malnutrition');
                        differentials.push('Nephrotic syndrome');
                    }
                }
            }
            
            document.getElementById('pattern-analysis').innerHTML = pattern;
            
            const diffList = document.getElementById('differential-list');
            diffList.innerHTML = '';
            if (differentials.length === 0) {
                diffList.innerHTML = '<li>No abnormalities detected</li>';
            } else {
                differentials.forEach(diff => {
                    const li = document.createElement('li');
                    li.textContent = diff;
                    diffList.appendChild(li);
                });
            }
        }
        
        function resetValues() {
            sliders.alt.value = 30;
            sliders.ast.value = 25;
            sliders.alp.value = 80;
            sliders.bilirubin.value = 0.8;
            sliders.directBili.value = 0.2;
            sliders.albumin.value = 4.0;
            sliders.protein.value = 7.0;
            sliders.ggt.value = 30;
            updateValues();
        }
        
        // Initialize on load
        updateValues();
    </script>
</body>
</html>
