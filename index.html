<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liver Function Test Simulator - Educational Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
        }

        .test-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
        }

        .test-panel h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .test-item {
            margin-bottom: 25px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .test-name {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
        }

        .test-value {
            font-size: 1.2em;
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .normal {
            background: #28a745;
            color: white;
        }

        .abnormal-high {
            background: #dc3545;
            color: white;
        }

        .abnormal-low {
            background: #ffc107;
            color: #333;
        }

        .slider-container {
            position: relative;
            margin-top: 10px;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.5);
            transition: transform 0.2s;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.5);
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.85em;
            color: #666;
        }

        .results-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
        }

        .results-panel h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #764ba2;
            padding-bottom: 10px;
        }

        .differential-list {
            list-style: none;
        }

        .differential-item {
            background: white;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #764ba2;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .differential-item h3 {
            color: #764ba2;
            margin-bottom: 8px;
            font-size: 1.2em;
        }

        .differential-item p {
            color: #666;
            line-height: 1.6;
        }

        .reset-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .reset-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .footer {
            background: #333;
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
        }

        .footer a {
            color: #667eea;
            text-decoration: none;
        }

        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 20px;
            color: #856404;
        }

        .disclaimer h3 {
            margin-bottom: 10px;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¨ Liver Function Test Simulator</h1>
            <p>Interactive Educational Tool for Medical Students</p>
        </div>

        <div class="disclaimer">
            <h3>‚ö†Ô∏è Educational Disclaimer</h3>
            <p>This simulator is designed for educational purposes only and should not be used for clinical decision-making. 
            Always consult current medical literature and guidelines for patient care. 
            This exercise has been created with Claude AI for educational purposes only.</p>
        </div>

        <div class="content">
            <div class="test-panel">
                <h2>Adjust Laboratory Values</h2>
                
                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">ALT (Alanine Aminotransferase)</span>
                        <span class="test-value" id="alt-value">40 U/L</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="5" max="3000" value="40" class="slider" id="alt-slider">
                        <div class="range-labels">
                            <span>5 U/L</span>
                            <span>Normal: 7-55 U/L (M)</span>
                            <span>3000 U/L</span>
                        </div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">AST (Aspartate Aminotransferase)</span>
                        <span class="test-value" id="ast-value">35 U/L</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="5" max="3000" value="35" class="slider" id="ast-slider">
                        <div class="range-labels">
                            <span>5 U/L</span>
                            <span>Normal: 8-48 U/L (M)</span>
                            <span>3000 U/L</span>
                        </div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Alkaline Phosphatase (ALP)</span>
                        <span class="test-value" id="alp-value">90 U/L</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="20" max="1000" value="90" class="slider" id="alp-slider">
                        <div class="range-labels">
                            <span>20 U/L</span>
                            <span>Normal: 40-129 U/L (M)</span>
                            <span>1000 U/L</span>
                        </div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Total Bilirubin</span>
                        <span class="test-value" id="bili-value">1.0 mg/dL</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="0.1" max="30" step="0.1" value="1.0" class="slider" id="bili-slider">
                        <div class="range-labels">
                            <span>0.1 mg/dL</span>
                            <span>Normal: ‚â§1.2 mg/dL</span>
                            <span>30 mg/dL</span>
                        </div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Direct Bilirubin</span>
                        <span class="test-value" id="dbili-value">0.2 mg/dL</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="0" max="25" step="0.1" value="0.2" class="slider" id="dbili-slider">
                        <div class="range-labels">
                            <span>0 mg/dL</span>
                            <span>Normal: 0-0.3 mg/dL</span>
                            <span>25 mg/dL</span>
                        </div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">Albumin</span>
                        <span class="test-value" id="albumin-value">4.0 g/dL</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="1.0" max="6.0" step="0.1" value="4.0" class="slider" id="albumin-slider">
                        <div class="range-labels">
                            <span>1.0 g/dL</span>
                            <span>Normal: 3.5-5.0 g/dL</span>
                            <span>6.0 g/dL</span>
                        </div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-header">
                        <span class="test-name">GGT (Gamma-glutamyltranspeptidase)</span>
                        <span class="test-value" id="ggt-value">40 U/L</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="5" max="600" value="40" class="slider" id="ggt-slider">
                        <div class="range-labels">
                            <span>5 U/L</span>
                            <span>Normal: 8-61 U/L (M)</span>
                            <span>600 U/L</span>
                        </div>
                    </div>
                </div>

                <button class="reset-button" onclick="resetValues()">Reset All Values</button>
            </div>

            <div class="results-panel">
                <h2>Differential Diagnosis</h2>
                <div id="differential-diagnosis">
                    <ul class="differential-list">
                        <li class="differential-item">
                            <h3>Normal Liver Function</h3>
                            <p>All values are within normal limits. No evidence of hepatocellular injury, cholestasis, or synthetic dysfunction.</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>¬© 2024 <strong>Deeksha Sikri</strong> | Created with Claude AI for Educational Purposes Only</p>
            <p>Based on Essential Laboratory Tests for Medical Education (ELTME)</p>
        </div>
    </div>

    <script>
        // Normal ranges for reference
        const normalRanges = {
            alt: { min: 7, max: 55, name: 'ALT' },
            ast: { min: 8, max: 48, name: 'AST' },
            alp: { min: 40, max: 129, name: 'ALP' },
            bili: { min: 0, max: 1.2, name: 'Total Bilirubin' },
            dbili: { min: 0, max: 0.3, name: 'Direct Bilirubin' },
            albumin: { min: 3.5, max: 5.0, name: 'Albumin' },
            ggt: { min: 8, max: 61, name: 'GGT' }
        };

        // Initialize sliders
        const sliders = {
            alt: document.getElementById('alt-slider'),
            ast: document.getElementById('ast-slider'),
            alp: document.getElementById('alp-slider'),
            bili: document.getElementById('bili-slider'),
            dbili: document.getElementById('dbili-slider'),
            albumin: document.getElementById('albumin-slider'),
            ggt: document.getElementById('ggt-slider')
        };

        const valueDisplays = {
            alt: document.getElementById('alt-value'),
            ast: document.getElementById('ast-value'),
            alp: document.getElementById('alp-value'),
            bili: document.getElementById('bili-value'),
            dbili: document.getElementById('dbili-value'),
            albumin: document.getElementById('albumin-value'),
            ggt: document.getElementById('ggt-value')
        };

        // Update value display and color coding
        function updateValue(test) {
            const slider = sliders[test];
            const value = parseFloat(slider.value);
            const display = valueDisplays[test];
            const range = normalRanges[test];

            // Update display text
            if (test === 'bili' || test === 'dbili' || test === 'albumin') {
                display.textContent = value.toFixed(1) + (test === 'albumin' ? ' g/dL' : ' mg/dL');
            } else {
                display.textContent = Math.round(value) + ' U/L';
            }

            // Update color based on normal range
            if (value < range.min) {
                display.className = 'test-value abnormal-low';
            } else if (value > range.max) {
                display.className = 'test-value abnormal-high';
            } else {
                display.className = 'test-value normal';
            }

            // Generate differential diagnosis
            generateDifferential();
        }

        // Generate differential diagnosis based on pattern recognition
        function generateDifferential() {
            const values = {
                alt: parseFloat(sliders.alt.value),
                ast: parseFloat(sliders.ast.value),
                alp: parseFloat(sliders.alp.value),
                bili: parseFloat(sliders.bili.value),
                dbili: parseFloat(sliders.dbili.value),
                albumin: parseFloat(sliders.albumin.value),
                ggt: parseFloat(sliders.ggt.value)
            };

            const differentials = [];
            
            // Calculate AST/ALT ratio
            const astAltRatio = values.ast / values.alt;
            
            // Check for normal pattern
            const allNormal = Object.keys(values).every(key => {
                const range = normalRanges[key];
                return values[key] >= range.min && values[key] <= range.max;
            });

            if (allNormal) {
                differentials.push({
                    title: 'Normal Liver Function',
                    description: 'All values are within normal limits. No evidence of hepatocellular injury, cholestasis, or synthetic dysfunction.'
                });
            } else {
                // Acute viral hepatitis pattern
                if (values.alt > 500 || values.ast > 500) {
                    if (values.alt >= values.ast) {
                        differentials.push({
                            title: 'Acute Viral Hepatitis',
                            description: 'Marked elevation of aminotransferases (>10x normal) with ALT ‚â• AST suggests acute viral hepatitis (HAV, HBV, HCV, HEV). Associated with hepatocellular injury pattern. May also see elevated bilirubin.'
                        });
                    }
                    if (values.alt > 1000 || values.ast > 1000) {
                        differentials.push({
                            title: 'Acute Liver Injury/Ischemic Hepatitis',
                            description: 'Massive elevation of aminotransferases (>20x normal) suggests acute liver necrosis. Consider ischemic hepatitis (shock liver), acetaminophen toxicity, or severe viral hepatitis.'
                        });
                    }
                }

                // Alcoholic hepatitis pattern
                if (astAltRatio > 2 && values.ast > normalRanges.ast.max && values.ast < 300 && values.ggt > normalRanges.ggt.max) {
                    differentials.push({
                        title: 'Alcoholic Hepatitis',
                        description: 'AST:ALT ratio >2 with modest elevation of AST (<300 U/L) and elevated GGT is characteristic of alcoholic liver disease. AST rarely exceeds 8x upper limit of normal.'
                    });
                }

                // Cholestatic pattern
                if (values.alp > normalRanges.alp.max * 2 && values.ggt > normalRanges.ggt.max * 2) {
                    if (values.bili > normalRanges.bili.max && values.dbili > normalRanges.dbili.max) {
                        differentials.push({
                            title: 'Obstructive Jaundice/Cholestasis',
                            description: 'Elevated ALP and GGT with hyperbilirubinemia (predominantly direct) suggests biliary obstruction (stones, stricture, malignancy) or intrahepatic cholestasis (PBC, PSC, drug-induced).'
                        });
                    } else {
                        differentials.push({
                            title: 'Cholestasis without Jaundice',
                            description: 'Isolated elevation of ALP and GGT without hyperbilirubinemia. Consider early biliary obstruction, infiltrative diseases (metastases, granulomas), or drug-induced cholestasis.'
                        });
                    }
                }

                // Chronic liver disease/cirrhosis pattern
                if (values.albumin < normalRanges.albumin.min && values.bili > normalRanges.bili.max) {
                    if (values.alt > normalRanges.alt.max || values.ast > normalRanges.ast.max) {
                        differentials.push({
                            title: 'Chronic Liver Disease/Cirrhosis',
                            description: 'Low albumin with elevated bilirubin suggests synthetic dysfunction. Associated mild-moderate elevation of aminotransferases indicates ongoing hepatocellular injury. Consider decompensated cirrhosis.'
                        });
                    }
                }

                // Isolated hyperbilirubinemia
                if (values.bili > normalRanges.bili.max && values.dbili <= normalRanges.dbili.max &&
                    values.alt <= normalRanges.alt.max && values.ast <= normalRanges.ast.max &&
                    values.alp <= normalRanges.alp.max) {
                    differentials.push({
                        title: 'Unconjugated Hyperbilirubinemia',
                        description: 'Isolated elevation of indirect bilirubin with normal liver enzymes. Consider hemolysis, Gilbert syndrome, or Crigler-Najjar syndrome.'
                    });
                }

                // Drug-induced liver injury pattern
                if ((values.alt > normalRanges.alt.max * 3 || values.alp > normalRanges.alp.max * 2) &&
                    values.alt < 1000 && values.ast < 1000) {
                    differentials.push({
                        title: 'Drug-Induced Liver Injury (DILI)',
                        description: 'Moderate elevation of aminotransferases or cholestatic enzymes. Pattern depends on the offending agent - hepatocellular (high ALT/AST), cholestatic (high ALP/GGT), or mixed.'
                    });
                }

                // Autoimmune hepatitis pattern
                if (values.alt > normalRanges.alt.max * 5 && values.alt < 1000 &&
                    values.albumin < normalRanges.albumin.min) {
                    differentials.push({
                        title: 'Autoimmune Hepatitis',
                        description: 'Moderate to marked elevation of aminotransferases with evidence of synthetic dysfunction (low albumin). Often associated with elevated globulins (not shown). Requires autoantibody testing.'
                    });
                }

                // Non-alcoholic fatty liver disease
                if (values.alt > normalRanges.alt.max && values.alt < 300 &&
                    values.ast > normalRanges.ast.max && values.ast < 300 &&
                    astAltRatio < 1) {
                    differentials.push({
                        title: 'Non-Alcoholic Fatty Liver Disease (NAFLD)',
                        description: 'Mild to moderate elevation of aminotransferases with ALT > AST. Common in metabolic syndrome, obesity, and diabetes. GGT may be mildly elevated.'
                    });
                }

                // Isolated ALP elevation
                if (values.alp > normalRanges.alp.max * 1.5 &&
                    values.ggt <= normalRanges.ggt.max &&
                    values.alt <= normalRanges.alt.max) {
                    differentials.push({
                        title: 'Non-Hepatic ALP Elevation',
                        description: 'Isolated ALP elevation with normal GGT suggests bone origin (Paget disease, bone metastases, fractures) or pregnancy (placental ALP). Consider fractionation to determine source.'
                    });
                }
            }

            // Update the differential diagnosis display
            const differentialDiv = document.getElementById('differential-diagnosis');
            if (differentials.length === 0) {
                differentialDiv.innerHTML = `
                    <ul class="differential-list">
                        <li class="differential-item">
                            <h3>Non-specific Pattern</h3>
                            <p>The current combination of values doesn't match a classic pattern. Consider repeating tests, checking for trends, and correlating with clinical presentation.</p>
                        </li>
                    </ul>
                `;
            } else {
                differentialDiv.innerHTML = `
                    <ul class="differential-list">
                        ${differentials.map(diff => `
                            <li class="differential-item">
                                <h3>${diff.title}</h3>
                                <p>${diff.description}</p>
                            </li>
                        `).join('')}
                    </ul>
                `;
            }
        }

        // Reset all values to normal
        function resetValues() {
            sliders.alt.value = 40;
            sliders.ast.value = 35;
            sliders.alp.value = 90;
            sliders.bili.value = 1.0;
            sliders.dbili.value = 0.2;
            sliders.albumin.value = 4.0;
            sliders.ggt.value = 40;

            Object.keys(sliders).forEach(test => updateValue(test));
        }

        // Add event listeners to all sliders
        Object.keys(sliders).forEach(test => {
            sliders[test].addEventListener('input', () => updateValue(test));
        });

        // Initialize display
        Object.keys(sliders).forEach(test => updateValue(test));
    </script>
</body>
</html>
